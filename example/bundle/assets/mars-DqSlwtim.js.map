{"version":3,"file":"mars-DqSlwtim.js","sources":["../../mars.js"],"sourcesContent":["import { TilesRenderer, EnvironmentControls } from '3d-tiles-renderer';\nimport { DebugTilesPlugin } from '3d-tiles-renderer/plugins';\nimport {\n\tScene,\n\tDirectionalLight,\n\tAmbientLight,\n\tWebGLRenderer,\n\tPerspectiveCamera,\n\tGroup,\n\tFogExp2,\n} from 'three';\nimport { GUI } from 'three/examples/jsm/libs/lil-gui.module.min.js';\nimport { TopoLinesPlugin } from './src/plugins/topolines/TopoLinesPlugin.js';\n\nlet camera, controls, scene, renderer;\nlet groundTiles, skyTiles;\n\nconst params = {\n\n\terrorTarget: 6,\n\tdisplayBoxBounds: false,\n\tdisplayTopoLines: false,\n\tfog: false,\n\n};\n\ninit();\nrender();\n\nfunction init() {\n\n\tconst fog = new FogExp2( 0xd8cec0, .0075, 250 );\n\tscene = new Scene();\n\n\t// primary camera view\n\trenderer = new WebGLRenderer( { antialias: true } );\n\trenderer.setPixelRatio( window.devicePixelRatio );\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\trenderer.setClearColor( 0xd8cec0 );\n\n\tdocument.body.appendChild( renderer.domElement );\n\trenderer.domElement.tabIndex = 1;\n\n\tcamera = new PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 4000 );\n\tcamera.position.set( 20, 10, 20 );\n\tcamera.lookAt( 0, 0, 0 );\n\n\t// controls\n\tcontrols = new EnvironmentControls( scene, camera, renderer.domElement );\n\tcontrols.minZoomDistance = 2;\n\tcontrols.cameraRadius = 1;\n\tcontrols.enableDamping = true;\n\n\t// lights\n\tconst dirLight = new DirectionalLight( 0xffffff );\n\tdirLight.position.set( 1, 2, 3 );\n\tscene.add( dirLight );\n\n\tconst ambLight = new AmbientLight( 0xffffff, 0.2 );\n\tscene.add( ambLight );\n\n\tconst tilesParent = new Group();\n\ttilesParent.rotation.set( Math.PI / 2, 0, 0 );\n\tscene.add( tilesParent );\n\n\tgroundTiles = new TilesRenderer( 'https://raw.githubusercontent.com/NASA-AMMOS/3DTilesSampleData/master/msl-dingo-gap/0528_0260184_to_s64o256_colorize/0528_0260184_to_s64o256_colorize/0528_0260184_to_s64o256_colorize_tileset.json' );\n\tgroundTiles.registerPlugin( new DebugTilesPlugin() );\n\tgroundTiles.registerPlugin( new TopoLinesPlugin() );\n\tgroundTiles.fetchOptions.mode = 'cors';\n\tgroundTiles.lruCache.minSize = 900;\n\tgroundTiles.lruCache.maxSize = 1300;\n\tgroundTiles.errorTarget = 12;\n\n\tskyTiles = new TilesRenderer( 'https://raw.githubusercontent.com/NASA-AMMOS/3DTilesSampleData/master/msl-dingo-gap/0528_0260184_to_s64o256_colorize/0528_0260184_to_s64o256_sky/0528_0260184_to_s64o256_sky_tileset.json' );\n\tskyTiles.registerPlugin( new DebugTilesPlugin() );\n\tskyTiles.fetchOptions.mode = 'cors';\n\tskyTiles.lruCache = groundTiles.lruCache;\n\n\ttilesParent.add( groundTiles.group, skyTiles.group );\n\n\tonWindowResize();\n\twindow.addEventListener( 'resize', onWindowResize, false );\n\n\tconst gui = new GUI();\n\tgui.add( params, 'fog' ).onChange( v => {\n\n\t\tscene.fog = v ? fog : null;\n\n\t} );\n\n\tgui.add( params, 'displayBoxBounds' );\n\tgui.add( params, 'displayTopoLines' );\n\tgui.add( params, 'errorTarget', 0, 100 );\n\tgui.open();\n\n}\n\nfunction onWindowResize() {\n\n\tcamera.aspect = window.innerWidth / window.innerHeight;\n\tcamera.updateProjectionMatrix();\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\trenderer.setPixelRatio( window.devicePixelRatio );\n\n}\n\nfunction render() {\n\n\trequestAnimationFrame( render );\n\n\tcontrols.update();\n\tcamera.updateMatrixWorld();\n\n\tgroundTiles.errorTarget = params.errorTarget;\n\tgroundTiles.getPluginByName( 'DEBUG_TILES_PLUGIN' ).displayBoxBounds = params.displayBoxBounds;\n\tskyTiles.getPluginByName( 'DEBUG_TILES_PLUGIN' ).displayBoxBounds = params.displayBoxBounds;\n\n\tgroundTiles.getPluginByName( 'TOPO_LINES_PLUGIN' ).topoOpacity = params.displayTopoLines ? 0.5 : 0;\n\n\tgroundTiles.setCamera( camera );\n\tgroundTiles.setResolutionFromRenderer( camera, renderer );\n\tgroundTiles.update();\n\n\tskyTiles.setCamera( camera );\n\tskyTiles.setResolutionFromRenderer( camera, renderer );\n\tskyTiles.update();\n\n\trenderer.render( scene, camera );\n\n}\n"],"names":["camera","controls","scene","renderer","groundTiles","skyTiles","params","init","render","fog","FogExp2","Scene","WebGLRenderer","PerspectiveCamera","EnvironmentControls","dirLight","DirectionalLight","ambLight","AmbientLight","tilesParent","Group","TilesRenderer","DebugTilesPlugin","TopoLinesPlugin","onWindowResize","gui","GUI","v"],"mappings":"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"}