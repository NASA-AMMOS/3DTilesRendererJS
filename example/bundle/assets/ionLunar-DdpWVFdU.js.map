{"version":3,"file":"ionLunar-DdpWVFdU.js","sources":["../../ionLunar.js"],"sourcesContent":["import {\n\tGlobeControls,\n\tTilesRenderer,\n} from '3d-tiles-renderer';\nimport {\n\tCesiumIonAuthPlugin,\n\tUpdateOnChangePlugin,\n\tTileCompressionPlugin,\n\tTilesFadePlugin,\n} from '3d-tiles-renderer/plugins';\nimport {\n\tScene,\n\tWebGLRenderer,\n\tPerspectiveCamera,\n} from 'three';\n\nlet controls, scene, camera, renderer, tiles;\nconst useMars = new URLSearchParams( location.search ).has( 'mars' );\nconst assetId = useMars ? '3644333' : '2684829';\n\ninit();\nanimate();\n\nfunction reinstantiateTiles() {\n\n\tif ( tiles ) {\n\n\t\tscene.remove( tiles.group );\n\t\ttiles.dispose();\n\t\ttiles = null;\n\n\t}\n\n\ttiles = new TilesRenderer();\n\ttiles.registerPlugin( new CesiumIonAuthPlugin( { apiToken: import.meta.env.VITE_ION_KEY, assetId: assetId, autoRefreshToken: true } ) );\n\ttiles.registerPlugin( new TileCompressionPlugin() );\n\ttiles.registerPlugin( new UpdateOnChangePlugin() );\n\ttiles.registerPlugin( new TilesFadePlugin() );\n\ttiles.group.rotation.x = - Math.PI / 2;\n\tscene.add( tiles.group );\n\n\ttiles.setCamera( camera );\n\tcontrols.setEllipsoid( tiles.ellipsoid, tiles.group );\n\n}\n\nfunction init() {\n\n\t// renderer\n\trenderer = new WebGLRenderer( { antialias: true } );\n\trenderer.setClearColor( 0x131619 );\n\tdocument.body.appendChild( renderer.domElement );\n\n\t// scene\n\tscene = new Scene();\n\tcamera = new PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 160000000 );\n\tcamera.position.set( 2620409, 0, - 6249816 ).multiplyScalar( useMars ? 1.5 : 1 );\n\tcamera.lookAt( 0, 0, 0 );\n\n\t// controls\n\tcontrols = new GlobeControls( scene, camera, renderer.domElement, null );\n\tcontrols.enableDamping = true;\n\n\t// initialize tiles\n\treinstantiateTiles();\n\n\tonWindowResize();\n\twindow.addEventListener( 'resize', onWindowResize, false );\n\n}\n\nfunction onWindowResize() {\n\n\tconst aspect = window.innerWidth / window.innerHeight;\n\tcamera.aspect = aspect;\n\tcamera.updateProjectionMatrix();\n\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\trenderer.setPixelRatio( window.devicePixelRatio );\n\n}\n\nfunction animate() {\n\n\trequestAnimationFrame( animate );\n\n\tif ( ! tiles ) return;\n\n\tcontrols.update();\n\n\t// update options\n\ttiles.setResolutionFromRenderer( camera, renderer );\n\n\t// update tiles\n\tcamera.updateMatrixWorld();\n\ttiles.update();\n\n\trenderer.render( scene, camera );\n\n}\n"],"names":["controls","scene","camera","renderer","tiles","useMars","assetId","init","animate","reinstantiateTiles","TilesRenderer","CesiumIonAuthPlugin","TileCompressionPlugin","UpdateOnChangePlugin","TilesFadePlugin","WebGLRenderer","Scene","PerspectiveCamera","GlobeControls","onWindowResize","aspect"],"mappings":"u4BAgBA,IAAIA,EAAUC,EAAOC,EAAQC,EAAUC,EACvC,MAAMC,EAAU,IAAI,gBAAiB,SAAS,MAAO,EAAE,IAAK,MAAO,EAC7DC,EAAUD,EAAU,UAAY,UAEtCE,EAAA,EACAC,EAAA,EAEA,SAASC,GAAqB,CAExBL,IAEJH,EAAM,OAAQG,EAAM,KAAM,EAC1BA,EAAM,QAAA,EACNA,EAAQ,MAITA,EAAQ,IAAIM,EACZN,EAAM,eAAgB,IAAIO,EAAqB,CAAE,SAAU,wLAA8B,QAAAL,EAAkB,iBAAkB,EAAA,CAAO,CAAE,EACtIF,EAAM,eAAgB,IAAIQ,CAAwB,EAClDR,EAAM,eAAgB,IAAIS,CAAuB,EACjDT,EAAM,eAAgB,IAAIU,CAAkB,EAC5CV,EAAM,MAAM,SAAS,EAAI,CAAE,KAAK,GAAK,EACrCH,EAAM,IAAKG,EAAM,KAAM,EAEvBA,EAAM,UAAWF,CAAO,EACxBF,EAAS,aAAcI,EAAM,UAAWA,EAAM,KAAM,CAErD,CAEA,SAASG,GAAO,CAGfJ,EAAW,IAAIY,EAAe,CAAE,UAAW,GAAO,EAClDZ,EAAS,cAAe,OAAS,EACjC,SAAS,KAAK,YAAaA,EAAS,UAAW,EAG/CF,EAAQ,IAAIe,EACZd,EAAS,IAAIe,EAAmB,GAAI,OAAO,WAAa,OAAO,YAAa,EAAG,IAAU,EACzFf,EAAO,SAAS,IAAK,QAAS,EAAG,QAAU,EAAE,eAAgBG,EAAU,IAAM,CAAE,EAC/EH,EAAO,OAAQ,EAAG,EAAG,CAAE,EAGvBF,EAAW,IAAIkB,EAAejB,EAAOC,EAAQC,EAAS,WAAY,IAAK,EACvEH,EAAS,cAAgB,GAGzBS,EAAA,EAEAU,EAAA,EACA,OAAO,iBAAkB,SAAUA,EAAgB,EAAM,CAE1D,CAEA,SAASA,GAAiB,CAEzB,MAAMC,EAAS,OAAO,WAAa,OAAO,YAC1ClB,EAAO,OAASkB,EAChBlB,EAAO,uBAAA,EAEPC,EAAS,QAAS,OAAO,WAAY,OAAO,WAAY,EACxDA,EAAS,cAAe,OAAO,gBAAiB,CAEjD,CAEA,SAASK,GAAU,CAElB,sBAAuBA,CAAQ,EAExBJ,IAEPJ,EAAS,OAAA,EAGTI,EAAM,0BAA2BF,EAAQC,CAAS,EAGlDD,EAAO,kBAAA,EACPE,EAAM,OAAA,EAEND,EAAS,OAAQF,EAAOC,CAAO,EAEhC"}