import{S as M,W as P,P as C,a as E,D as R,A as T,m as y,l as I,Q as W,R as A,V as $}from"./three.module-DBfedTbk.js";/* empty css               */import{I as j}from"./I3DMLoader-Co8j1K3i.js";import{O}from"./OrbitControls-DkXhkMTr.js";import{D as z}from"./DRACOLoader-BzMKjVbk.js";import{G as F}from"./GLTFLoader-BjagHNWe.js";import"./BatchTable-CRr3zuRk.js";import"./Ellipsoid-CLPX16sm.js";let s,w,f,t,d,L,i,u;H();D();function H(){u=document.getElementById("hover-info"),f=new M,t=new P({antialias:!0}),t.setPixelRatio(window.devicePixelRatio),t.setSize(window.innerWidth,window.innerHeight),t.setClearColor(1383455),t.shadowMap.enabled=!0,t.shadowMap.type=C,document.body.appendChild(t.domElement),s=new E(60,window.innerWidth/window.innerHeight,1,4e3),s.position.set(100,100,100),w=new O(s,t.domElement),w.screenSpacePanning=!1,w.minDistance=1,w.maxDistance=2e3,d=new R(16777215,1.25),d.position.set(1,2,3).multiplyScalar(40),d.castShadow=!0,d.shadow.bias=-.01,d.shadow.mapSize.setScalar(2048);const a=d.shadow.camera;a.left=-200,a.bottom=-200,a.right=200,a.top=200,a.updateProjectionMatrix(),f.add(d);const c=new T(16777215,.05);f.add(c);const l=new j,m=new z;m.setDecoderPath("https://unpkg.com/three@0.153.0/examples/jsm/libs/draco/gltf/");const b=new F(l.manager);b.setDRACOLoader(m),l.manager.addHandler(/\.gltf$/,b),l.loadAsync("https://3d.geo.admin.ch/ch.swisstopo.vegetation.3d/v1/20250728/10/200/330.i3dm").then(r=>{let e=null;if(r.scene.traverse(o=>{!e&&o.isInstancedMesh&&(e=o)}),e){r.scene.updateMatrixWorld(!0);const o=new y,x=new W,p=new y,g=new I,n=new y;for(let h=0,S=e.count;h<S;h++)e.getMatrixAt(h,g),g.premultiply(e.matrixWorld),g.decompose(o,x,p),n.add(o);n.divideScalar(e.count),w.target.copy(n),s.position.add(n),w.update()}console.log(r),f.add(r.scene)}),L=new A,i=new $,v(),window.addEventListener("resize",v,!1),t.domElement.addEventListener("mousemove",_,!1)}function _(a){const c=this.getBoundingClientRect();i.x=a.clientX-c.x,i.y=a.clientY-c.y,i.x=i.x/c.width*2-1,i.y=-(i.y/c.height)*2+1,L.setFromCamera(i,s);const l=L.intersectObject(f);let m=-1;if(l.length>0){const{object:b,instanceId:r}=l[0];if(r){m=r;let e=b;for(;!e.batchTable;)e=e.parent;const o=e.batchTable,x=o.getDataFromId(m),p=x["3DTILES_batch_table_hierarchy"],g=o.getKeys();u.innerText=`${"_batchid".padEnd(15)}: ${m}
`;for(const n of g)u.innerText+=`${n.padEnd(15)}: ${x[n]}
`;for(const n in p)for(const h in p[n])u.innerText+=`${h.padEnd(15)} : ${p[n][h]}
`}}else u.innerText=""}function v(){s.aspect=window.innerWidth/window.innerHeight,t.setPixelRatio(window.devicePixelRatio),t.setSize(window.innerWidth,window.innerHeight),s.updateProjectionMatrix()}function D(){requestAnimationFrame(D),G()}function G(){t.render(f,s)}
//# sourceMappingURL=i3dmExample-Cx0Cz5r0.js.map
