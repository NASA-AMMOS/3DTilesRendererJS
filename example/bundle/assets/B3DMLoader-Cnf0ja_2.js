import{B as g}from"./B3DMLoaderBase-w5mdSgm-.js";import{aY as m,n as T}from"./three.module-D-uF--xd.js";import{G as b}from"./GLTFLoader-B4GrkiON.js";class w extends g{constructor(i=m){super(),this.manager=i,this.adjustmentTransform=new T}parse(i){const c=super.parse(i),p=c.glbBytes.slice().buffer;return new Promise((h,l)=>{const f=this.manager,t=this.fetchOptions,a=f.getHandler("path.gltf")||new b(f);t.credentials==="include"&&t.mode==="cors"&&a.setCrossOrigin("use-credentials"),"credentials"in t&&a.setWithCredentials(t.credentials==="include"),t.headers&&a.setRequestHeader(t.headers);let r=this.workingPath;!/[\\/]$/.test(r)&&r.length&&(r+="/");const d=this.adjustmentTransform;a.parse(p,r,e=>{const{batchTable:u,featureTable:o}=c,{scene:s}=e,n=o.getData("RTC_CENTER",1,"FLOAT","VEC3");n&&(s.position.x+=n[0],s.position.y+=n[1],s.position.z+=n[2]),e.scene.updateMatrix(),e.scene.matrix.multiply(d),e.scene.matrix.decompose(e.scene.position,e.scene.quaternion,e.scene.scale),e.batchTable=u,e.featureTable=o,s.batchTable=u,s.featureTable=o,h(e)},l)})}}export{w as B};
//# sourceMappingURL=B3DMLoader-Cnf0ja_2.js.map
