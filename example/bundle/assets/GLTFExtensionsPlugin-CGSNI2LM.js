import{G as oe}from"./GLTFLoader-B4GrkiON.js";import{n as ae,aS as ce,aT as ue,t as le,o as fe,V as A,h as he,O as de,an as me,az as j,W as pe,aG as G,b as ye,aU as xe,aV as Ae,aW as Te,aX as we,F as Ee}from"./three.module-D-uF--xd.js";function y(i,e,t){return i&&e in i?i[e]:t}function ee(i){return i!=="BOOLEAN"&&i!=="STRING"&&i!=="ENUM"}function be(i){return/^FLOAT/.test(i)}function C(i){return/^VEC/.test(i)}function D(i){return/^MAT/.test(i)}function te(i,e,t,s=null){return D(t)||C(t)?s.fromArray(i,e):i[e]}function P(i){const{type:e,componentType:t}=i;switch(e){case"SCALAR":return t==="INT64"?0n:0;case"VEC2":return new A;case"VEC3":return new fe;case"VEC4":return new le;case"MAT2":return new ue;case"MAT3":return new ce;case"MAT4":return new ae;case"BOOLEAN":return!1;case"STRING":return"";case"ENUM":return 0}}function z(i,e){if(e==null)return!1;switch(i){case"SCALAR":return typeof e=="number"||typeof e=="bigint";case"VEC2":return e.isVector2;case"VEC3":return e.isVector3;case"VEC4":return e.isVector4;case"MAT2":return e.isMatrix2;case"MAT3":return e.isMatrix3;case"MAT4":return e.isMatrix4;case"BOOLEAN":return typeof e=="boolean";case"STRING":return typeof e=="string";case"ENUM":return typeof e=="number"||typeof e=="bigint"}throw new Error("ClassProperty: invalid type.")}function O(i,e=null){switch(i){case"INT8":return Int8Array;case"INT16":return Int16Array;case"INT32":return Int32Array;case"INT64":return BigInt64Array;case"UINT8":return Uint8Array;case"UINT16":return Uint16Array;case"UINT32":return Uint32Array;case"UINT64":return BigUint64Array;case"FLOAT32":return Float32Array;case"FLOAT64":return Float64Array}switch(e){case"BOOLEAN":return Uint8Array;case"STRING":return Uint8Array}throw new Error("ClassProperty: invalid type.")}function ge(i,e=null){if(i.array){e=e&&Array.isArray(e)?e:[],e.length=i.count;for(let s=0,n=e.length;s<n;s++)e[s]=M(i,e[s])}else e=M(i,e);return e}function M(i,e=null){const t=i.default,s=i.type;if(e=e||P(i),t===null){switch(s){case"SCALAR":return 0;case"VEC2":return e.set(0,0);case"VEC3":return e.set(0,0,0);case"VEC4":return e.set(0,0,0,0);case"MAT2":return e.identity();case"MAT3":return e.identity();case"MAT4":return e.identity();case"BOOLEAN":return!1;case"STRING":return"";case"ENUM":return""}throw new Error("ClassProperty: invalid type.")}else if(D(s))e.fromArray(t);else if(C(s))e.fromArray(t);else return t}function Ie(i,e){if(i.noData===null)return e;const t=i.noData,s=i.type;if(Array.isArray(e))for(let o=0,a=e.length;o<a;o++)e[o]=n(e[o]);else e=n(e);return e;function n(o){return r(o)&&(o=M(i,o)),o}function r(o){if(D(s)){const a=o.elements;for(let c=0,f=t.length;c<f;c++)if(t[c]!==a[c])return!1;return!0}else if(C(s)){for(let a=0,c=t.length;a<c;a++)if(t[a]!==o.getComponent(a))return!1;return!0}else return t===o}}function Ne(i,e){switch(i){case"INT8":return Math.max(e/127,-1);case"INT16":return Math.max(e,32767,-1);case"INT32":return Math.max(e/2147483647,-1);case"INT64":return Math.max(Number(e)/9223372036854776e3,-1);case"UINT8":return e/255;case"UINT16":return e/65535;case"UINT32":return e/4294967295;case"UINT64":return Number(e)/18446744073709552e3}}function _e(i,e){const{type:t,componentType:s,scale:n,offset:r,normalized:o}=i;if(Array.isArray(e))for(let u=0,l=e.length;u<l;u++)e[u]=a(e[u]);else e=a(e);return e;function a(u){return D(t)?u=f(u):C(t)?u=c(u):u=p(u),u}function c(u){return u.x=p(u.x),u.y=p(u.y),"z"in u&&(u.z=p(u.z)),"w"in u&&(u.w=p(u.w)),u}function f(u){const l=u.elements;for(let d=0,m=l.length;d<m;d++)l[d]=p(l[d]);return u}function p(u){return o&&(u=Ne(s,u)),(o||be(s))&&(u=u*n+r),u}}function U(i,e,t=null){if(i.array){Array.isArray(e)||(e=new Array(i.count||0)),e.length=t!==null?t:i.count;for(let s=0,n=e.length;s<n;s++)z(i.type,e[s])||(e[s]=P(i))}else z(i.type,e)||(e=P(i));return e}function R(i,e){for(const t in e)t in i||delete e[t];for(const t in i){const s=i[t];e[t]=U(s,e[t])}}function Oe(i){switch(i){case"ENUM":return 1;case"SCALAR":return 1;case"VEC2":return 2;case"VEC3":return 3;case"VEC4":return 4;case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16;case"BOOLEAN":return-1;case"STRING":return-1;default:return-1}}class L{constructor(e,t,s=null){this.name=t.name||null,this.description=t.description||null,this.type=t.type,this.componentType=t.componentType||null,this.enumType=t.enumType||null,this.array=t.array||!1,this.count=t.count||0,this.normalized=t.normalized||!1,this.offset=t.offset||0,this.scale=y(t,"scale",1),this.max=y(t,"max",1/0),this.min=y(t,"min",-1/0),this.required=t.required||!1,this.noData=y(t,"noData",null),this.default=y(t,"default",null),this.semantic=y(t,"semantic",null),this.enumSet=null,this.accessorProperty=s,s&&(this.offset=y(s,"offset",this.offset),this.scale=y(s,"scale",this.scale),this.max=y(s,"max",this.max),this.min=y(s,"min",this.min)),t.type==="ENUM"&&(this.enumSet=e[this.enumType],this.componentType===null&&(this.componentType=y(this.enumSet,"valueType","UINT16")))}shapeToProperty(e,t=null){return U(this,e,t)}resolveDefaultElement(e){return M(this,e)}resolveDefault(e){return ge(this,e)}resolveNoData(e){return Ie(this,e)}resolveEnumsToStrings(e){const t=this.enumSet;if(this.type==="ENUM")if(Array.isArray(e))for(let n=0,r=e.length;n<r;n++)e[n]=s(e[n]);else e=s(e);return e;function s(n){const r=t.values.find(o=>o.value===n);return r===null?"":r.name}}adjustValueScaleOffset(e){return ee(this.type)?_e(this,e):e}}class B{constructor(e,t={},s={},n=null){this.definition=e,this.class=t[e.class],this.className=e.class,this.enums=s,this.data=n,this.name="name"in e?e.name:null,this.properties=null}getPropertyNames(){return Object.keys(this.class.properties)}includesData(e){return!!this.definition.properties[e]}dispose(){}_initProperties(e=L){const t={};for(const s in this.class.properties)t[s]=new e(this.enums,this.class.properties[s],this.definition.properties[s]);this.properties=t}}class Ce extends L{constructor(e,t,s=null){super(e,t,s),this.attribute=(s==null?void 0:s.attribute)??null}}class De extends B{constructor(...e){super(...e),this.isPropertyAttributeAccessor=!0,this._initProperties(Ce)}getData(e,t,s={}){const n=this.properties;R(n,s);for(const r in n)s[r]=this.getPropertyValue(r,e,t,s[r]);return s}getPropertyValue(e,t,s,n=null){if(t>=this.count)throw new Error("PropertyAttributeAccessor: Requested index is outside the range of the buffer.");const r=this.properties[e],o=r.type;if(r){if(!this.definition.properties[e])return r.resolveDefault(n)}else throw new Error("PropertyAttributeAccessor: Requested class property does not exist.");n=r.shapeToProperty(n);const a=s.getAttribute(r.attribute.toLowerCase());if(D(o)){const c=n.elements;for(let f=0,p=c.length;f<p;f<p)c[f]=a.getComponent(t,f)}else if(C(o))n.fromBufferAttribute(a,t);else if(o==="SCALAR"||o==="ENUM")n=a.getX(t);else throw new Error("StructuredMetadata.PropertyAttributeAccessor: BOOLEAN and STRING types are not supported by property attributes.");return n=r.adjustValueScaleOffset(n),n=r.resolveEnumsToStrings(n),n=r.resolveNoData(n),n}}class Me extends L{constructor(e,t,s=null){super(e,t,s),this.values=(s==null?void 0:s.values)??null,this.valueLength=Oe(this.type),this.arrayOffsets=y(s,"arrayOffsets",null),this.stringOffsets=y(s,"stringOffsets",null),this.arrayOffsetType=y(s,"arrayOffsetType","UINT32"),this.stringOffsetType=y(s,"stringOffsetType","UINT32")}getArrayLengthFromId(e,t){let s=this.count;if(this.arrayOffsets!==null){const{arrayOffsets:n,arrayOffsetType:r}=this,o=O(r),a=new o(e[n]);s=a[t+1]-a[t]}return s}getIndexOffsetFromId(e,t){let s=t;if(this.arrayOffsets){const{arrayOffsets:n,arrayOffsetType:r}=this,o=O(r);s=new o(e[n])[s]}else this.array&&(s*=this.count);return s}}class Re extends B{constructor(...e){super(...e),this.isPropertyTableAccessor=!0,this.count=this.definition.count,this._initProperties(Me)}getData(e,t={}){const s=this.properties;R(s,t);for(const n in s)t[n]=this.getPropertyValue(n,e,t[n]);return t}_readValueAtIndex(e,t,s,n=null){const r=this.properties[e],{componentType:o,type:a}=r,c=this.data,f=c[r.values],p=O(o,a),u=new p(f),l=r.getIndexOffsetFromId(c,t);if(ee(a)||a==="ENUM")return te(u,(l+s)*r.valueLength,a,n);if(a==="STRING"){let d=l+s,m=0;if(r.stringOffsets!==null){const{stringOffsets:x,stringOffsetType:T}=r,b=O(T),w=new b(c[x]);m=w[d+1]-w[d],d=w[d]}const h=new Uint8Array(u.buffer,d,m);n=new TextDecoder().decode(h)}else if(a==="BOOLEAN"){const d=l+s,m=Math.floor(d/8),h=d%8;n=(u[m]>>h&1)===1}return n}getPropertyValue(e,t,s=null){if(t>=this.count)throw new Error("PropertyTableAccessor: Requested index is outside the range of the table.");const n=this.properties[e];if(n){if(!this.definition.properties[e])return n.resolveDefault(s)}else throw new Error("PropertyTableAccessor: Requested property does not exist.");const r=n.array,o=this.data,a=n.getArrayLengthFromId(o,t);if(s=n.shapeToProperty(s,a),r)for(let c=0,f=s.length;c<f;c++)s[c]=this._readValueAtIndex(e,t,c,s[c]);else s=this._readValueAtIndex(e,t,0,s);return s=n.adjustValueScaleOffset(s),s=n.resolveEnumsToStrings(s),s=n.resolveNoData(s),s}}const Ve=new de(-1,1,1,-1,0,1);class Le extends me{constructor(){super(),this.setAttribute("position",new j([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new j([0,2,0,0,2,0],2))}}const Se=new Le;class Fe{constructor(e){this._mesh=new he(Se,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Ve)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}const N=new we;class v{constructor(){this._renderer=new pe,this._target=new G(1,1),this._texTarget=new G,this._quad=new Fe(new ye({blending:Te,blendDst:Ae,blendSrc:xe,uniforms:{map:{value:null},pixel:{value:new A}},vertexShader:`
				void main() {

					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

				}
			`,fragmentShader:`
				uniform sampler2D map;
				uniform ivec2 pixel;

				void main() {

					gl_FragColor = texelFetch( map, pixel, 0 );

				}
			`}))}increaseSizeTo(e){this._target.setSize(Math.max(this._target.width,e),1)}readDataAsync(e){const{_renderer:t,_target:s}=this;return t.readRenderTargetPixelsAsync(s,0,0,e.length/4,1,e)}readData(e){const{_renderer:t,_target:s}=this;t.readRenderTargetPixels(s,0,0,e.length/4,1,e)}renderPixelToTarget(e,t,s){const{_renderer:n,_target:r}=this;N.min.copy(t),N.max.copy(t),N.max.x+=1,N.max.y+=1,n.initRenderTarget(r),n.copyTextureToTexture(e,r.texture,N,s,0)}}const E=new class{constructor(){let i=null;Object.getOwnPropertyNames(v.prototype).forEach(e=>{e!=="constructor"&&(this[e]=(...t)=>(i=i||new v,i[e](...t)))})}},k=new A,q=new A,X=new A;function Pe(i,e){return e===0?i.getAttribute("uv"):i.getAttribute(`uv${e}`)}function se(i,e,t=new Array(3)){let s=3*e,n=3*e+1,r=3*e+2;return i.index&&(s=i.index.getX(s),n=i.index.getX(n),r=i.index.getX(r)),t[0]=s,t[1]=n,t[2]=r,t}function ne(i,e,t,s,n){const[r,o,a]=s,c=Pe(i,e);k.fromBufferAttribute(c,r),q.fromBufferAttribute(c,o),X.fromBufferAttribute(c,a),n.set(0,0,0).addScaledVector(k,t.x).addScaledVector(q,t.y).addScaledVector(X,t.z)}function re(i,e,t,s){const n=i.x-Math.floor(i.x),r=i.y-Math.floor(i.y),o=Math.floor(n*e%e),a=Math.floor(r*t%t);return s.set(o,a),s}const $=new A,H=new A,W=new A;class Ue extends L{constructor(e,t,s=null){super(e,t,s),this.channels=y(s,"channels",[0]),this.index=y(s,"index",null),this.texCoord=y(s,"texCoord",null),this.valueLength=parseInt(this.type.replace(/[^0-9]/g,""))||1}readDataFromBuffer(e,t,s=null){const n=this.type;if(n==="BOOLEAN"||n==="STRING")throw new Error("PropertyTextureAccessor: BOOLEAN and STRING types not supported.");return te(e,t*this.valueLength,n,s)}}class Be extends B{constructor(...e){super(...e),this.isPropertyTextureAccessor=!0,this._asyncRead=!1,this._initProperties(Ue)}getData(e,t,s,n={}){const r=this.properties;R(r,n);const o=Object.keys(r),a=o.map(c=>n[c]);return this.getPropertyValuesAtTexel(o,e,t,s,a),o.forEach((c,f)=>n[c]=a[f]),n}async getDataAsync(e,t,s,n={}){const r=this.properties;R(r,n);const o=Object.keys(r),a=o.map(c=>n[c]);return await this.getPropertyValuesAtTexelAsync(o,e,t,s,a),o.forEach((c,f)=>n[c]=a[f]),n}getPropertyValuesAtTexelAsync(...e){this._asyncRead=!0;const t=this.getPropertyValuesAtTexel(...e);return this._asyncRead=!1,t}getPropertyValuesAtTexel(e,t,s,n,r=[]){for(;r.length<e.length;)r.push(null);r.length=e.length,E.increaseSizeTo(r.length);const o=this.data,a=this.definition.properties,c=this.properties,f=se(n,t);for(let l=0,d=e.length;l<d;l++){const m=e[l];if(!a[m])continue;const h=c[m],x=o[h.index];ne(n,h.texCoord,s,f,$),re($,x.image.width,x.image.height,H),W.set(l,0),E.renderPixelToTarget(x,H,W)}const p=new Uint8Array(e.length*4);if(this._asyncRead)return E.readDataAsync(p).then(()=>(u.call(this),r));return E.readData(p),u.call(this),r;function u(){for(let l=0,d=e.length;l<d;l++){const m=e[l],h=c[m],x=h.type;if(r[l]=U(h,r[l]),h){if(!a[m]){r[l]=h.resolveDefault(r);continue}}else throw new Error("PropertyTextureAccessor: Requested property does not exist.");const T=h.valueLength*(h.count||1),b=h.channels.map(g=>p[4*l+g]),w=h.componentType,S=O(w,x),F=new S(T);if(new Uint8Array(F.buffer).set(b),h.array){const g=r[l];for(let I=0,ie=g.length;I<ie;I++)g[I]=h.readDataFromBuffer(F,I,g[I])}else r[l]=h.readDataFromBuffer(F,0,r[l]);r[l]=h.adjustValueScaleOffset(r[l]),r[l]=h.resolveEnumsToStrings(r[l]),r[l]=h.resolveNoData(r[l])}}}dispose(){this.data.forEach(e=>{e&&(e.dispose(),e.image instanceof ImageBitmap&&e.image.close())})}}class K{constructor(e,t,s,n=null,r=null){const{schema:o,propertyTables:a=[],propertyTextures:c=[],propertyAttributes:f=[]}=e,{enums:p,classes:u}=o,l=a.map(h=>new Re(h,u,p,s));let d=[],m=[];n&&(n.propertyTextures&&(d=n.propertyTextures.map(h=>new Be(c[h],u,p,t))),n.propertyAttributes&&(m=n.propertyAttributes.map(h=>new De(f[h],u,p)))),this.schema=o,this.tableAccessors=l,this.textureAccessors=d,this.attributeAccessors=m,this.object=r,this.textures=t,this.nodeMetadata=n}getPropertyTableData(e,t,s=null){if(!Array.isArray(e)||!Array.isArray(t))s=s||{},s=this.tableAccessors[e].getData(t,s);else{s=s||[];const n=Math.min(e.length,t.length);s.length=n;for(let r=0;r<n;r++){const o=this.tableAccessors[e[r]];s[r]=o.getData(t[r],s[r])}}return s}getPropertyTableInfo(e=null){if(e===null&&(e=this.tableAccessors.map((t,s)=>s)),Array.isArray(e))return e.map(t=>{const s=this.tableAccessors[t];return{name:s.name,className:s.definition.class}});{const t=this.tableAccessors[e];return{name:t.name,className:t.definition.class}}}getPropertyTextureData(e,t,s=[]){const n=this.textureAccessors;s.length=n.length;for(let r=0;r<n.length;r++){const o=n[r];s[r]=o.getData(e,t,this.object.geometry,s[r])}return s}async getPropertyTextureDataAsync(e,t,s=[]){const n=this.textureAccessors;s.length=n.length;const r=[];for(let o=0;o<n.length;o++){const c=n[o].getDataAsync(e,t,this.object.geometry,s[o]).then(f=>{s[o]=f});r.push(c)}return await Promise.all(r),s}getPropertyTextureInfo(){return this.textureAccessors}getPropertyAttributeData(e,t=[]){const s=this.attributeAccessors;t.length=s.length;for(let n=0;n<s.length;n++){const r=s[n];t[n]=r.getData(e,this.object.geometry,t[n])}return t}getPropertyAttributeInfo(){return this.attributeAccessors.map(e=>({name:e.name,className:e.definition.class}))}dispose(){this.textureAccessors.forEach(e=>e.dispose()),this.tableAccessors.forEach(e=>e.dispose()),this.attributeAccessors.forEach(e=>e.dispose())}}const _="EXT_structural_metadata";function je(i,e=[]){var n;const t=((n=i.json.textures)==null?void 0:n.length)||0,s=new Array(t).fill(null);return e.forEach(({properties:r})=>{for(const o in r){const{index:a}=r[o];s[a]===null&&(s[a]=i.loadTexture(a))}}),Promise.all(s)}function Ge(i,e=[]){var n;const t=((n=i.json.bufferViews)==null?void 0:n.length)||0,s=new Array(t).fill(null);return e.forEach(({properties:r})=>{for(const o in r){const{values:a,arrayOffsets:c,stringOffsets:f}=r[o];s[a]===null&&(s[a]=i.loadBufferView(a)),s[c]===null&&(s[c]=i.loadBufferView(c)),s[f]===null&&(s[f]=i.loadBufferView(f))}}),Promise.all(s)}class ze{constructor(e){this.parser=e,this.name=_}async afterRoot({scene:e,parser:t}){const s=t.json.extensionsUsed;if(!s||!s.includes(_))return;let n=null,r=t.json.extensions[_];if(r.schemaUri){const{manager:f,path:p,requestHeader:u,crossOrigin:l}=t.options,d=new URL(r.schemaUri,p).toString(),m=new Ee(f);m.setCrossOrigin(l),m.setResponseType("json"),m.setRequestHeader(u),n=m.loadAsync(d).then(h=>{r={...r,schema:h}})}const[o,a]=await Promise.all([je(t,r.propertyTextures),Ge(t,r.propertyTables),n]),c=new K(r,o,a);e.userData.structuralMetadata=c,e.traverse(f=>{var p;if(t.associations.has(f)){const{meshes:u,primitives:l}=t.associations.get(f),d=(p=t.json.meshes[u])==null?void 0:p.primitives[l];if(d&&d.extensions&&d.extensions[_]){const m=d.extensions[_];f.userData.structuralMetadata=new K(r,o,a,m,f)}else f.userData.structuralMetadata=c}})}}const Q=new A,Z=new A,J=new A;function ve(i){return i.x>i.y&&i.x>i.z?0:i.y>i.z?1:2}class ke{constructor(e,t,s){this.geometry=e,this.textures=t,this.data=s,this._asyncRead=!1,this.featureIds=s.featureIds.map(n=>{const{texture:r,...o}=n,a={label:null,propertyTable:null,nullFeatureId:null,...o};return r&&(a.texture={texCoord:0,channels:[0],...r}),a})}getTextures(){return this.textures}getFeatureInfo(){return this.featureIds}getFeaturesAsync(...e){this._asyncRead=!0;const t=this.getFeatures(...e);return this._asyncRead=!1,t}getFeatures(e,t){const{geometry:s,textures:n,featureIds:r}=this,o=new Array(r.length).fill(null),a=r.length;E.increaseSizeTo(a);const c=se(s,e),f=c[ve(t)];for(let l=0,d=r.length;l<d;l++){const m=r[l],h="nullFeatureId"in m?m.nullFeatureId:null;if("texture"in m){const x=n[m.texture.index];ne(s,m.texture.texCoord,t,c,Q),re(Q,x.image.width,x.image.height,Z),J.set(l,0),E.renderPixelToTarget(n[m.texture.index],Z,J)}else if("attribute"in m){const T=s.getAttribute(`_feature_id_${m.attribute}`).getX(f);T!==h&&(o[l]=T)}else{const x=f;x!==h&&(o[l]=x)}}const p=new Uint8Array(a*4);if(this._asyncRead)return E.readDataAsync(p).then(()=>(u(),o));return E.readData(p),u(),o;function u(){const l=new Uint32Array(1);for(let d=0,m=r.length;d<m;d++){const h=r[d],x="nullFeatureId"in h?h.nullFeatureId:null;if("texture"in h){const{channels:T}=h.texture,b=T.map(S=>p[4*d+S]);new Uint8Array(l.buffer).set(b);const w=l[0];w!==x&&(o[d]=w)}}}}dispose(){this.textures.forEach(e=>{e&&(e.dispose(),e.image instanceof ImageBitmap&&e.image.close())})}}const V="EXT_mesh_features";function Y(i,e,t){i.traverse(s=>{var n;if(e.associations.has(s)){const{meshes:r,primitives:o}=e.associations.get(s),a=(n=e.json.meshes[r])==null?void 0:n.primitives[o];a&&a.extensions&&a.extensions[V]&&t(s,a.extensions[V])}})}class qe{constructor(e){this.parser=e,this.name=V}async afterRoot({scene:e,parser:t}){var a;const s=t.json.extensionsUsed;if(!s||!s.includes(V))return;const n=((a=t.json.textures)==null?void 0:a.length)||0,r=new Array(n).fill(null);Y(e,t,(c,{featureIds:f})=>{f.forEach(p=>{if(p.texture&&r[p.texture.index]===null){const u=p.texture.index;r[u]=t.loadTexture(u)}})});const o=await Promise.all(r);Y(e,t,(c,f)=>{c.userData.meshFeatures=new ke(c.geometry,o,f)})}}class Xe{constructor(){this.name="CESIUM_RTC"}afterRoot(e){if(e.parser.json.extensions&&e.parser.json.extensions.CESIUM_RTC){const{center:t}=e.parser.json.extensions.CESIUM_RTC;t&&(e.scene.position.x+=t[0],e.scene.position.y+=t[1],e.scene.position.z+=t[2])}}}class We{constructor(e){e={metadata:!0,rtc:!0,plugins:[],dracoLoader:null,ktxLoader:null,meshoptDecoder:null,autoDispose:!0,...e},this.tiles=null,this.metadata=e.metadata,this.rtc=e.rtc,this.plugins=e.plugins,this.dracoLoader=e.dracoLoader,this.ktxLoader=e.ktxLoader,this.meshoptDecoder=e.meshoptDecoder,this._gltfRegex=/\.(gltf|glb)$/g,this._dracoRegex=/\.drc$/g,this._loader=null}init(e){const t=new oe(e.manager);this.dracoLoader&&(t.setDRACOLoader(this.dracoLoader),e.manager.addHandler(this._dracoRegex,this.dracoLoader)),this.ktxLoader&&t.setKTX2Loader(this.ktxLoader),this.meshoptDecoder&&t.setMeshoptDecoder(this.meshoptDecoder),this.rtc&&t.register(()=>new Xe),this.metadata&&(t.register(()=>new ze),t.register(()=>new qe)),this.plugins.forEach(s=>t.register(s)),e.manager.addHandler(this._gltfRegex,t),this.tiles=e,this._loader=t}dispose(){this.tiles.manager.removeHandler(this._gltfRegex),this.tiles.manager.removeHandler(this._dracoRegex),this.autoDispose&&(this.ktxLoader.dispose(),this.dracoLoader.dispose())}}export{Fe as F,We as G};
//# sourceMappingURL=GLTFExtensionsPlugin-CGSNI2LM.js.map
