{"version":3,"file":"CanvasDOMOverlay-BFXAGi4N.js","sources":["../../../src/r3f/components/CanvasDOMOverlay.jsx"],"sourcesContent":["import { useMemo, useEffect, StrictMode, forwardRef, useState } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { useThree } from '@react-three/fiber';\n\n// Utility class for overlaying dom elements on top of the canvas\nexport const CanvasDOMOverlay = forwardRef( function CanvasDOMOverlay( { children, ...rest }, ref ) {\n\n\t// create the dom element and react root\n\tconst [ gl ] = useThree( state => [ state.gl ] );\n\tconst [ root, setRoot ] = useState( null );\n\tconst container = useMemo( () => document.createElement( 'div' ), [] );\n\n\t// position the container\n\tuseEffect( () => {\n\n\t\tcontainer.style.pointerEvents = 'none';\n\t\tcontainer.style.position = 'absolute';\n\t\tcontainer.style.width = '100%';\n\t\tcontainer.style.height = '100%';\n\t\tcontainer.style.left = 0;\n\t\tcontainer.style.top = 0;\n\t\tgl.domElement.parentNode.appendChild( container );\n\n\t\treturn () => {\n\n\t\t\tcontainer.remove();\n\n\t\t};\n\n\t}, [ container, gl.domElement.parentNode ] );\n\n\t// create the react render root\n\tuseEffect( () => {\n\n\t\tconst root = createRoot( container );\n\t\tsetRoot( root );\n\t\treturn () => {\n\n\t\t\troot.unmount();\n\n\t\t};\n\n\t}, [ container ] );\n\n\t// render the children into the container\n\tif ( root !== null ) {\n\n\t\troot.render(\n\t\t\t<StrictMode>\n\t\t\t\t<div { ...rest } ref={ ref }>\n\t\t\t\t\t{ children }\n\t\t\t\t</div>\n\t\t\t</StrictMode>\n\t\t);\n\n\t}\n\n} );\n"],"names":["CanvasDOMOverlay","forwardRef","children","rest","ref","gl","useThree","state","root","setRoot","useState","container","useMemo","useEffect","createRoot","jsx","StrictMode"],"mappings":"iEAKO,MAAMA,EAAmBC,EAAAA,WAAY,SAA2B,CAAE,SAAAC,EAAU,GAAGC,CAAA,EAAQC,EAAM,CAGnG,KAAM,CAAEC,CAAG,EAAIC,KAAmB,CAAEC,EAAM,EAAG,CAAE,EACzC,CAAEC,EAAMC,CAAQ,EAAIC,EAAAA,SAAU,IAAK,EACnCC,EAAYC,EAAAA,QAAS,IAAM,SAAS,cAAe,KAAM,EAAG,EAAG,EAGrEC,EAAAA,UAAW,KAEVF,EAAU,MAAM,cAAgB,OAChCA,EAAU,MAAM,SAAW,WAC3BA,EAAU,MAAM,MAAQ,OACxBA,EAAU,MAAM,OAAS,OACzBA,EAAU,MAAM,KAAO,EACvBA,EAAU,MAAM,IAAM,EACtBN,EAAG,WAAW,WAAW,YAAaM,CAAU,EAEzC,IAAM,CAEZA,EAAU,OAAA,CAEX,GAEE,CAAEA,EAAWN,EAAG,WAAW,UAAW,CAAE,EAG3CQ,EAAAA,UAAW,IAAM,CAEhB,MAAML,EAAOM,EAAAA,WAAYH,CAAU,EACnC,OAAAF,EAASD,CAAK,EACP,IAAM,CAEZA,EAAK,QAAA,CAEN,CAED,EAAG,CAAEG,CAAU,CAAE,EAGZH,IAAS,MAEbA,EAAK,OACJO,EAAAA,IAACC,EAAAA,YACA,SAAAD,MAAC,MAAA,CAAM,GAAGZ,EAAO,IAAAC,EACd,SAAAF,EACH,CAAA,CACD,CAAA,CAKH,CAAE"}