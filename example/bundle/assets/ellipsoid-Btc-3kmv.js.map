{"version":3,"file":"ellipsoid-Btc-3kmv.js","sources":["../../three/ellipsoid.js"],"sourcesContent":["import { SphereHelper } from '../../src/three/plugins/objects/SphereHelper.js';\nimport { EllipsoidRegionHelper, EllipsoidRegionLineHelper } from '../../src/three/plugins/objects/EllipsoidRegionHelper.js';\nimport {\n\tScene,\n\tGroup,\n\tDirectionalLight,\n\tAmbientLight,\n\tWebGLRenderer,\n\tPerspectiveCamera,\n\tMeshPhongMaterial,\n\tBox3,\n\tSphere,\n\tAxesHelper,\n\tMesh,\n\tSphereGeometry,\n\tBoxGeometry,\n\tLineSegments,\n\tEdgesGeometry,\n} from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport GUI from 'three/examples/jsm/libs/lil-gui.module.min.js';\n\nlet camera, controls, scene, renderer, group;\nlet dirLight;\nlet helper, ghostHelper, edges, boxGroup, sphereGroup;\n\nconst params = {\n\n\tdisplaySphereHelper: false,\n\tdisplayBoxHelper: false,\n\n};\n\ninit();\nanimate();\n\nfunction init() {\n\n\tscene = new Scene();\n\n\t// set up renderer\n\trenderer = new WebGLRenderer( { antialias: true } );\n\trenderer.setPixelRatio( window.devicePixelRatio );\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\trenderer.setClearColor( 0x151c1f );\n\trenderer.shadowMap.enabled = true;\n\n\tdocument.body.appendChild( renderer.domElement );\n\n\t// set up camera\n\tcamera = new PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 0.1, 100 );\n\tcamera.position.set( 3, 1.5, 1 );\n\n\t// add the region group with rotation\n\tgroup = new Group();\n\tgroup.rotation.x = - Math.PI / 2;\n\tscene.add( group );\n\n\t// add ellipsoid helper\n\thelper = new EllipsoidRegionHelper();\n\thelper.material = new MeshPhongMaterial( {\n\n\t\tpolygonOffset: true,\n\t\tpolygonOffsetFactor: 1,\n\t\tpolygonOffsetUnits: 1,\n\n\t} );\n\thelper.ellipsoidRegion.radius.z = 0.95;\n\n\thelper.ellipsoidRegion.heightStart = - 0.05;\n\thelper.ellipsoidRegion.heightEnd = 0.05;\n\n\thelper.ellipsoidRegion.latStart = 0;\n\thelper.ellipsoidRegion.latEnd = Math.PI / 4;\n\n\thelper.ellipsoidRegion.lonStart = 0;\n\thelper.ellipsoidRegion.lonEnd = Math.PI / 4;\n\n\t// add ghosted region\n\tghostHelper = new EllipsoidRegionHelper();\n\tghostHelper.material = new MeshPhongMaterial( { opacity: 0.1, transparent: true, depthWrite: false } );\n\n\t// add region edges\n\tedges = new EllipsoidRegionLineHelper( helper.ellipsoidRegion );\n\tedges.material.color.set( 0x151c1f ).convertSRGBToLinear();\n\n\t// add sphere helper\n\tconst sphereHelper = new SphereHelper( new Sphere() );\n\tsphereHelper.sphere.center.set( 0, 0, 0 );\n\tsphereHelper.sphere.radius = 1;\n\n\tconst sphereMesh = new Mesh( new SphereGeometry(), new MeshPhongMaterial( {\n\t\ttransparent: true,\n\t\tdepthWrite: false,\n\t\topacity: 0.35,\n\t\tcolor: 0xffff00\n\t} ) );\n\n\tsphereGroup = new Group();\n\tsphereGroup.add( sphereMesh, sphereHelper );\n\n\n\t// add box helper\n\tconst boxHelper = new LineSegments( new EdgesGeometry( new BoxGeometry() ) );\n\tboxHelper.material.color.set( 0xffff00 );\n\t// const boxHelper = new Box3Helper( new Box3() );\n\n\n\tconst boxMesh = new Mesh( new BoxGeometry(), sphereMesh.material );\n\tboxGroup = new Group();\n\tboxGroup.add( boxHelper, boxMesh, new AxesHelper() );\n\n\tgroup.add( helper, ghostHelper, edges, boxGroup, sphereGroup );\n\n\t// controls\n\tcontrols = new OrbitControls( camera, renderer.domElement );\n\tcontrols.screenSpacePanning = false;\n\tcontrols.minDistance = 0;\n\tcontrols.maxDistance = 2000;\n\n\tupdateHelper();\n\n\t// lights\n\tdirLight = new DirectionalLight( 0xffffff, 1.25 );\n\tdirLight.position.set( 1, 2, 3 ).multiplyScalar( 40 );\n\tscene.add( dirLight );\n\n\tconst ambLight = new AmbientLight( 0xffffff, 0.15 );\n\tscene.add( ambLight );\n\n\tconst gui = new GUI();\n\tgui.add( params, 'displayBoxHelper' );\n\tgui.add( params, 'displaySphereHelper' );\n\n\tconst radiusFolder = gui.addFolder( 'radius' );\n\tradiusFolder.add( helper.ellipsoidRegion.radius, 'x', 0.1, 2 ).onChange( updateHelper );\n\tradiusFolder.add( helper.ellipsoidRegion.radius, 'y', 0.1, 2 ).onChange( updateHelper );\n\tradiusFolder.add( helper.ellipsoidRegion.radius, 'z', 0.1, 2 ).onChange( updateHelper );\n\n\tconst regionFolder = gui.addFolder( 'region' );\n\tregionFolder.add( helper.ellipsoidRegion, 'latStart', - Math.PI / 2, Math.PI / 2 ).onChange( updateHelper );\n\tregionFolder.add( helper.ellipsoidRegion, 'latEnd', - Math.PI / 2, Math.PI / 2 ).onChange( updateHelper );\n\tregionFolder.add( helper.ellipsoidRegion, 'lonStart', 0, 2 * Math.PI ).onChange( updateHelper );\n\tregionFolder.add( helper.ellipsoidRegion, 'lonEnd', 0, 2 * Math.PI ).onChange( updateHelper );\n\tregionFolder.add( helper.ellipsoidRegion, 'heightStart', - 0.25, 0.25 ).onChange( updateHelper );\n\tregionFolder.add( helper.ellipsoidRegion, 'heightEnd', - 0.25, 0.25 ).onChange( updateHelper );\n\n\tonWindowResize();\n\twindow.addEventListener( 'resize', onWindowResize, false );\n\n}\n\nfunction updateHelper() {\n\n\t// update the ghost radius\n\tghostHelper.ellipsoidRegion.radius.copy( helper.ellipsoidRegion.radius );\n\n\t// update geometry\n\thelper.update();\n\tghostHelper.update();\n\tedges.update();\n\n\t// update the bounds helpers\n\tconst sphere = new Sphere();\n\thelper.ellipsoidRegion.getBoundingSphere( sphere );\n\tsphereGroup.position.copy( sphere.center );\n\tsphereGroup.scale.setScalar( sphere.radius );\n\n\tconst box = new Box3();\n\thelper.ellipsoidRegion.getBoundingBox( box, boxGroup.matrix );\n\tboxGroup.matrix.decompose(\n\t\tboxGroup.position,\n\t\tboxGroup.quaternion,\n\t\tboxGroup.scale,\n\t);\n\tbox.getSize( boxGroup.scale );\n\tbox.getCenter( boxGroup.position ).applyMatrix4( boxGroup.matrix );\n\tscene.updateMatrixWorld( true );\n\n\tcontrols.target.set( 0, 0, 0 ).applyMatrix4( boxGroup.matrixWorld );\n\tcamera.position.add( controls.target );\n\n\n}\n\nfunction onWindowResize() {\n\n\tcamera.aspect = window.innerWidth / window.innerHeight;\n\trenderer.setPixelRatio( window.devicePixelRatio );\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\tcamera.updateProjectionMatrix();\n\n}\n\nfunction animate() {\n\n\trequestAnimationFrame( animate );\n\n\trender();\n\n}\n\nfunction render() {\n\n\tsphereGroup.visible = params.displaySphereHelper;\n\n\tboxGroup.visible = params.displayBoxHelper;\n\n\trenderer.render( scene, camera );\n\n}\n"],"names":["camera","controls","scene","renderer","group","dirLight","helper","ghostHelper","edges","boxGroup","sphereGroup","params","init","animate","Scene","WebGLRenderer","PerspectiveCamera","Group","EllipsoidRegionHelper","MeshPhongMaterial","EllipsoidRegionLineHelper","sphereHelper","SphereHelper","Sphere","sphereMesh","Mesh","SphereGeometry","boxHelper","LineSegments","EdgesGeometry","BoxGeometry","boxMesh","AxesHelper","OrbitControls","updateHelper","DirectionalLight","ambLight","AmbientLight","gui","GUI","radiusFolder","regionFolder","onWindowResize","sphere","box","Box3","render"],"mappings":"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"}